<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Veg Recipe Blog </title>
  <style>
    :root{
      --bg:#f7f6ff;
      --card:#ffffff;
      --accent:#ff6b6b;
      --muted:#6b7280;
      --accent-2:#6b8eff;
      --glass: rgba(255,255,255,0.6);
      --radius:12px;
      font-family: 'Segoe UI', Roboto, system-ui, -apple-system, 'Helvetica Neue', Arial;
    }

    *{box-sizing:border-box}
    body{
      margin:0; background:linear-gradient(180deg,var(--bg),#eef6ff); color:#0f172a;
      padding:28px; -webkit-font-smoothing:antialiased;
    }

    header{display:flex;align-items:center;gap:18px;margin-bottom:14px}
    .logo{
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      color:white;padding:12px;border-radius:10px;font-weight:700;box-shadow:0 6px 20px rgba(107,139,255,0.12)
    }
    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .topbar{display:flex;gap:12px;align-items:center;margin:18px 0}
    .search{flex:1;display:flex;gap:8px}
    .search input{flex:1;padding:12px 14px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);background:var(--card)}
    .btn{background:var(--accent-2);color:white;padding:10px 14px;border-radius:10px;border:none;cursor:pointer}

    main{display:grid;grid-template-columns:1fr 320px;gap:20px}

    /* recipe grid */
    .recipes{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px}
    .card{background:var(--card);border-radius:var(--radius);overflow:hidden;box-shadow:0 6px 18px rgba(12,20,40,0.06);display:flex;flex-direction:column}
    .card img{width:100%;height:160px;object-fit:cover}
    .card .content{padding:12px 14px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .title{font-weight:700}
    .tags{font-size:12px;color:var(--muted)}
    .desc{font-size:13px;color:#334155;margin:8px 0}

    .rating{display:flex;gap:2px;align-items:center}
    .star{cursor:pointer;width:18px;height:18px}
    .rating small{color:var(--muted);margin-left:6px}

    /* sidebar/form */
    aside{position:relative}
    .panel{background:linear-gradient(180deg,white, #fbfdff);padding:14px;border-radius:12px;box-shadow:0 6px 22px rgba(16,24,40,0.06)}
    form{display:flex;flex-direction:column;gap:10px}
    label{font-size:13px;color:var(--muted)}
    input[type=text], textarea, select{padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);font-size:14px}
    textarea{min-height:90px;resize:vertical}

    .img-preview{width:100%;height:160px;border-radius:8px;background:linear-gradient(180deg,#f8fafc,#eef2ff);display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:13px}

    .small{font-size:12px;color:var(--muted)}

    footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}

    /* student-like playful touches */
    .badge{display:inline-block;padding:6px 8px;border-radius:999px;font-size:12px;background:linear-gradient(90deg,#fff1f2,#fff7ed);color:#7f1d1d}

    @media (max-width:900px){main{grid-template-columns:1fr} aside{order:2}}
  </style>
</head>
<body>
  <header>
    <div class="logo">Veg<b>Recipes</b></div>
    <div>
      <h1>Veg Recipe Blog </h1>
      <p class="lead">Browse, search and add your own pure-veg recipes. Made to look like a friendly semester project.</p>
    </div>
  </header>

  <div class="topbar">
    <div class="search">
      <input id="searchInput" placeholder="Search recipes, e.g. paneer, biryani, dosa..." />
      <button id="clearSearch" class="btn" title="Clear">Clear</button>
    </div>
    <div class="badge">Pure Veg</div>
  </div>

  <main>
    <section>
      <div id="recipes" class="recipes" aria-live="polite">
        <!-- recipe cards inserted by JS -->
      </div>
      <footer>
        Tip: Click star ratings on a recipe card to add your rating. Recipes you add are saved locally in your browser.
      </footer>
    </section>

    <aside>
      <div class="panel">
        <h3 style="margin:0 0 6px 0">Add a Recipe</h3>
        <form id="addForm">
          <label>Recipe name</label>
          <input id="name" type="text" placeholder="Aloo Paratha" required />

          <label>Category / Cuisine</label>
          <select id="cuisine">
            <option>North Indian</option>
            <option>South Indian</option>
            <option>Street Food</option>
            <option>Biryani & Rice</option>
            <option>Other</option>
          </select>

          <label>Short description</label>
          <textarea id="desc" placeholder="What's special about this dish?" required></textarea>

          <label>Initial rating (1-5)</label>
          <select id="initRate">
            <option>5</option>
            <option>4</option>
            <option>3</option>
            <option>2</option>
            <option>1</option>
          </select>

          <label>Upload image (optional)</label>
          <input id="imgInput" type="file" accept="image/*" />
          <div id="imgPreview" class="img-preview">No image yet — choose a file to preview</div>

          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" type="submit">Add recipe</button>
            <button id="resetForm" type="button" style="background:transparent;border:1px solid rgba(12,20,40,0.06);padding:10px;border-radius:8px;cursor:pointer">Reset</button>
          </div>

          <div class="small">Note: This demo stores recipes in your browser's localStorage. It's privacy-friendly — data stays on your machine.</div>
        </form>
      </div>
    </aside>
  </main>

  <script>
    // Starter recipes (pure veg)
    const starter = [
      {
        id: crypto.randomUUID(),
        name: 'Paneer Butter Masala',
        cuisine: 'North Indian',
        desc: 'Creamy tomato gravy with cubes of paneer — rich and comforting.',
        img: 'https://myfoodstory.com/wp-content/uploads/2021/07/restaurant-style-paneer-butter-masala-2-500x500.jpg',
        ratings: [5,4,5]
      },
      {
        id: crypto.randomUUID(),
        name: 'Masala Dosa',
        cuisine: 'South Indian',
        desc: 'Crispy fermented crepe filled with spiced potato. Serve with chutney & sambar.',
        img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTyLIFrcWSOk1C3cgNvs-Lcyaq7ZmYvmevfzQ&s',
        ratings: [5,5,4]
      },
      {
        id: crypto.randomUUID(),
        name: 'Vegetable Biryani',
        cuisine: 'Biryani & Rice',
        desc: 'Aromatic basmati rice cooked with assorted vegetables and warming spices.',
        img: 'https://www.madhuseverydayindian.com/wp-content/uploads/2022/11/easy-vegetable-biryani.jpg',
        ratings: [5,4]
      },
      {
        id: crypto.randomUUID(),
        name: 'Aloo Paratha',
        cuisine: 'North Indian',
        desc: 'Stuffed flatbread with spiced potato — perfect with curd and pickle.',
        img: 'https://www.indianhealthyrecipes.com/wp-content/uploads/2020/08/aloo-paratha-recipe.jpg',
        ratings: [4,4,3]
      },
      {
        id: crypto.randomUUID(),
        name: 'Chole Bhature',
        cuisine: 'Street Food',
        desc: 'Spiced chickpea curry served with deep-fried fluffy bhature.',
        img: 'https://madhurasrecipe.com/wp-content/uploads/2025/09/MR-Chole-Bhature-featured.jpg',
        ratings: [4,5]
      }
    ];

    // Local storage key
    const KEY = 'veg-recipe-blog:recipes:v1';

    // Load recipes (starter + saved)
    function loadRecipes(){
      try{
        const raw = localStorage.getItem(KEY);
        if(!raw) return starter.slice();
        const parsed = JSON.parse(raw);
        // in case localStorage is corrupted, fallback
        if(!Array.isArray(parsed)) return starter.slice();
        return parsed;
      }catch(e){console.warn(e);return starter.slice();}
    }

    function saveRecipes(arr){
      localStorage.setItem(KEY, JSON.stringify(arr));
    }

    let recipes = loadRecipes();

    // Helpers
    function avg(arr){if(!arr || arr.length===0) return 0;return (arr.reduce((a,b)=>a+b,0)/arr.length).toFixed(1)}

    // Render grid
    const recipesEl = document.getElementById('recipes');

    function renderCards(list){
      recipesEl.innerHTML = '';
      if(list.length===0){recipesEl.innerHTML = '<div style="padding:30px;color:var(--muted)">No recipes found.</div>';return}
      list.forEach(r=>{
        const card = document.createElement('article'); card.className='card';
        card.innerHTML = `
          <img src="${r.img || 'https://via.placeholder.com/600x400?text=No+Image'}" alt="${r.name}" loading="lazy" />
          <div class="content">
            <div class="meta">
              <div>
                <div class="title">${r.name}</div>
                <div class="tags">${r.cuisine}</div>
              </div>
              <div class="rating" data-id="${r.id}">
                ${renderStars(avg(r.ratings))}
                <small>(${r.ratings.length})</small>
              </div>
            </div>
            <div class="desc">${r.desc}</div>
            <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
              <button class="btn" data-action="view" data-id="${r.id}">View</button>
              <button style="background:transparent;border:1px solid rgba(12,20,40,0.06);padding:8px;border-radius:8px;cursor:pointer" data-action="delete" data-id="${r.id}">Delete</button>
            </div>
          </div>
        `;
        recipesEl.appendChild(card);
      })

      // attach star click listeners
      document.querySelectorAll('.rating').forEach(el=>{
        const id = el.dataset.id;
        el.querySelectorAll('.star').forEach(st => st.addEventListener('click', e=>{
          const value = Number(e.currentTarget.dataset.value);
          addRating(id, value);
        }))
      })

      // attach action buttons
      recipesEl.querySelectorAll('[data-action="delete"]').forEach(b=> b.addEventListener('click', e=>{
        const id = e.currentTarget.dataset.id;
        recipes = recipes.filter(x=>x.id!==id);
        saveRecipes(recipes);
        applyFilter();
      }))

      recipesEl.querySelectorAll('[data-action="view"]').forEach(b=> b.addEventListener('click', e=>{
        const id = e.currentTarget.dataset.id;
        const r = recipes.find(x=>x.id===id);
        if(!r) return;
        alert(`${r.name}\n\nCuisine: ${r.cuisine}\n\n${r.desc}\n\nAverage rating: ${avg(r.ratings)} (${r.ratings.length} ratings)`);
      }))
    }

    function renderStars(average){
      // show 5 star icons; highlight to nearest half-star (simple)
      const avgN = Number(average);
      let html = '';
      for(let i=1;i<=5;i++){
        html += `<svg class="star" data-value="${i}" viewBox="0 0 24 24" width="18" height="18" xmlns="http://www.w3.org/2000/svg" fill="${i<=Math.round(avgN) ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="1.2" style="color:${i<=Math.round(avgN)?'var(--accent)':'#cbd5e1'}"><path d="M12 .587l3.668 7.431L23.4 9.75l-5.7 5.558L19.335 24 12 19.771 4.665 24 6.3 15.308 0.6 9.75l7.732-1.732z"/></svg>`
      }
      return html;
    }

    function addRating(id,value){
      const idx = recipes.findIndex(r=>r.id===id);
      if(idx===-1) return;
      recipes[idx].ratings.push(value);
      saveRecipes(recipes);
      applyFilter();
    }

    // search & filter
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');

    searchInput.addEventListener('input', ()=> applyFilter());
    clearSearch.addEventListener('click', ()=>{ searchInput.value=''; applyFilter(); })

    function applyFilter(){
      const q = searchInput.value.trim().toLowerCase();
      const filtered = recipes.filter(r=>{
        if(!q) return true;
        return r.name.toLowerCase().includes(q) || r.desc.toLowerCase().includes(q) || r.cuisine.toLowerCase().includes(q);
      });
      renderCards(filtered);
    }

    // form handling
    const form = document.getElementById('addForm');
    const imgInput = document.getElementById('imgInput');
    const imgPreview = document.getElementById('imgPreview');
    const resetFormBtn = document.getElementById('resetForm');

    let uploadedDataUrl = '';

    imgInput.addEventListener('change', e=>{
      const f = e.target.files && e.target.files[0];
      if(!f) { uploadedDataUrl=''; imgPreview.textContent='No image yet — choose a file to preview'; return}
      const reader = new FileReader();
      reader.onload = function(ev){ uploadedDataUrl = ev.target.result; imgPreview.innerHTML = `<img src="${uploadedDataUrl}" style="width:100%;height:100%;object-fit:cover;border-radius:8px" />`}
      reader.readAsDataURL(f);
    })

    resetFormBtn.addEventListener('click', ()=>{ form.reset(); imgPreview.textContent='No image yet — choose a file to preview'; uploadedDataUrl=''; })

    form.addEventListener('submit', e=>{
      e.preventDefault();
      const newRecipe = {
        id: crypto.randomUUID(),
        name: document.getElementById('name').value.trim(),
        cuisine: document.getElementById('cuisine').value,
        desc: document.getElementById('desc').value.trim(),
        img: uploadedDataUrl || 'https://via.placeholder.com/600x400?text=Veg+Dish',
        ratings: [Number(document.getElementById('initRate').value)]
      };
      recipes.unshift(newRecipe);
      saveRecipes(recipes);
      form.reset(); uploadedDataUrl=''; imgPreview.textContent='No image yet — choose a file to preview';
      applyFilter();
      // give student-like feedback
      alert('Recipe added! It will appear at the top.');
    })

    // initial render
    applyFilter();
  </script>
</body>
</html>

           
